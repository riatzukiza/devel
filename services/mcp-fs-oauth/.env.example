# --- Network ---
PORT=3000
# Public HTTPS base URL where ChatGPT can reach this server (no trailing slash)
PUBLIC_BASE_URL=https://your-domain.example

# Optional: issuer can differ from public base (rare)
# ISSUER_URL=https://your-domain.example

# --- OAuth (built-in AS + RS) ---
# Supported values: password | github | google
AUTH_LOGIN_PROVIDER=password

# password login
OWNER_PASSWORD=change-me

# GitHub login (OAuth App)
# GITHUB_LOGIN_CLIENT_ID=
# GITHUB_LOGIN_CLIENT_SECRET=
# Optional allowlist (comma-separated GitHub logins). If set, only these users may login.
# GITHUB_ALLOWED_USERS=yourgithub,anotheruser

# Google login (OAuth client)
# GOOGLE_LOGIN_CLIENT_ID=
# GOOGLE_LOGIN_CLIENT_SECRET=
# Optional allowlist (comma-separated emails). If set, only these emails may login.
# GOOGLE_ALLOWED_EMAILS=you@example.com

# --- Storage backend ---
# auto | local | github
STORAGE_MODE=auto

# Local filesystem
LOCAL_ROOT=/absolute/path/to/root

# GitHub repository (contents API) fallback or primary
GITHUB_REPO_OWNER=octave-commons
GITHUB_REPO_NAME=promethean
GITHUB_REPO_BRANCH=main
# If you want the MCP root to be a subfolder of the repo:
# GITHUB_REPO_PREFIX=docs/
GITHUB_REPO_TOKEN=ghp_xxx
# If GITHUB_REPO_TOKEN is unset, runtime also checks GITHUB_TOKEN then GH_TOKEN.

# --- Optional behavior ---
# If true, skip consent screen once login succeeds (still requires login).
AUTO_APPROVE=false

# --- Upstream APIs (usually through Janus gateway) ---
# Defaults point to Janus facade routes.
# If Janus injects service API keys, OPENPLANNER_API_KEY / OPENCODE_API_KEY can remain unset here.
# OPENPLANNER_API_BASE_URL=http://127.0.0.1:8788/api/openplanner
# OPENPLANNER_API_KEY=
# OPENCODE_API_BASE_URL=http://127.0.0.1:8788/api/opencode
# OPENCODE_API_KEY=
# WORKSPACE_API_BASE_URL=http://127.0.0.1:8788/api/workspace
# WORKSPACE_API_KEY=

# Optional: Path to DuckDB database for OAuth state persistence (codes, tokens)
# Defaults to ./data/oauth.db
# OAUTH_PERSISTENCE_PATH=./data/oauth.db

# OAuth persistence Redis key namespace (defaults to "oauth")
# OAUTH_REDIS_PREFIX=oauth

# Set true on exactly one process to enable DuckDB projection owner mode.
# Non-owner processes run Redis-only and never open the DuckDB file.
# OAUTH_DUCKDB_OWNER=false

# Redis lock TTL (seconds) for DuckDB projection owner election.
# OAUTH_DUCKDB_LOCK_TTL_SECONDS=30

# Optional unified Redis URL (if set, REDIS_HOST/REDIS_PORT are ignored)
# REDIS_URL=redis://127.0.0.1:6379

# Optional shared secret for internal token introspection endpoint
# (POST /internal/oauth/introspect). If unset, introspection is loopback-only.
# MCP_INTERNAL_SHARED_SECRET=change-me-shared-secret

# OAuth token/session lifetimes
# Access token lifetime in seconds (default: 86400 = 24h)
# OAUTH_ACCESS_TTL_SECONDS=86400
# Refresh token lifetime in seconds (default: 2592000 = 30d)
# OAUTH_REFRESH_TTL_SECONDS=2592000
# MCP session metadata TTL in Redis (default: 86400 = 24h)
# MCP_SESSION_TTL_SECONDS=86400

# Optional: explicit JSON file describing exec command allowlist + glob permissions
# If unset, loader checks MCP_EXEC_COMMANDS_JSON and then auto-discovers:
# .opencode/exec-permissions.json, exec-permissions.json,
# promethean.mcp.exec.json, services/mcp-fs-oauth/exec-permissions.json
# MCP_EXEC_CONFIG=/absolute/path/to/exec-config.json
