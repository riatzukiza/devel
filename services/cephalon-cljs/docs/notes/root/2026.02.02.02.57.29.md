Here’s the updated workspace zip with **multi-bot** support + docs + skills:

[Download cephalon-mono.zip](sandbox:/mnt/data/cephalon-mono.zip)

## What changed

### Multi-bot support (one process per bot)

* Added **bot registry + per-bot config**: `packages/cephalon-ts/src/config/bots.ts`

  * `CEPHALON_BOT_ID` selects the bot (`duck`, `janitor`, …)
  * each bot has its own:

    * `cephalonId` (self-name)
    * `discordTokenEnv`
    * `sessions` (persona + routing priority)
    * `tick` loop config (interval + which session receives `system.tick`)
    * persistence + chroma namespacing

### Sessions are now configurable (not hard-coded)

* `createCephalonApp()` now builds sessions from the selected bot config instead of being “Duck-only”.

### Namespacing to avoid collisions across bots

* Chroma collection is now auto-suffixed by `botId` via `createDefaultChromaConfig(botId)`.

### CLJS wrapper updated to consume TS runtime cleanly

* `packages/cephalon-cljs/src/promethean/bridge/cephalon_ts.cljs`

  * supports `{:bot-id "duck"}` and forwards options to TS
  * fixed `stop!` to match the new runtime signature

### Repo structure + runbooks

* `AGENTS.md` added
* `.opencode/skills/` added:

  * `cephalon-run.md`
  * `cephalon-multi-bot.md`
  * `cephalon-debug.md`

### Service wrapper for process managers

* `services/cephalon-bot/` runs a single bot process
* includes:

  * `.env.example`
  * `ecosystem.cljs` example for PM2-style multi-process setup

## Quickstart

```bash
pnpm install
cp services/cephalon-bot/.env.example .env
# set DUCK_DISCORD_TOKEN=...

CEPHALON_BOT_ID=duck pnpm -C services/cephalon-bot dev
```

Run a second bot (separate process):

```bash
# set JANITOR_DISCORD_TOKEN=...
CEPHALON_BOT_ID=janitor pnpm -C services/cephalon-bot dev
```

## Where to customize personas + behavior loops

* Add/modify bots: `packages/cephalon-ts/src/config/bots.ts`

  * change `sessions[]` personas
  * change `tick.sessionId` + `tick.intervalMs`
  * adjust `tick.reflectionPrompt` (this is the “autonomous tool-using loop” forcing function)

If you want, next I can also wire **per-bot policy overlays** (channel maps + output channel) as first-class configs (right now it’s supported as `policyOverrides`, but you may want file-based configs per bot).
